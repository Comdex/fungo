{"Id":13,"Title":"讯飞语音云Java SDK语音合成的使用支持文本分段合成","Slug":"voicespeech-sdk","Text":"讯飞语音云的java sdk调用其实也挺简单的，直接调用那几个方法就行，但一开始使用时可能发现一些问题就如语音合成是有字数限制的，语音合成接口不能同时调用多次，只能在上一次结束后才能开始下一次的播放，要不每次只能播放最后一次调用方法的文本，贴部分代码出来给有需要看看，共同学习分享!只实现了播放和取消功能，暂停的接口调用好像总出错啊，只好等待新版java sdk了...\n\n```\npackage notepad.voice;\n\nimport notepad.listener.VoiceNameListener;\nimport notepad.listener.VoiceSpeechListener;\n\nimport com.iflytek.speech.SpeechError;\nimport com.iflytek.speech.SynthesizerPlayer;\nimport com.iflytek.speech.SynthesizerPlayerListener;\n\n\npublic class VoiceRead implements SynthesizerPlayerListener\n{\n\u0009\n\u0009SynthesizerPlayer player ;\n\u0009//初始化语音合成对象\n\u0009public VoiceRead()\n\u0009{\n\u0009\u0009player = SynthesizerPlayer.createSynthesizerPlayer(\"appid=\" + Version.getAppid());\n\u0009}\n\u0009\n\u0009public  void play()\n\u0009{\n\u0009\u0009\n\u0009\u0009SynthesizerPlayer player = SynthesizerPlayer.getSynthesizerPlayer();\n\u0009\u0009\u0009//设置发音人为小宇\n\u0009\u0009\u0009player.setVoiceName(VoiceNameListener.voice);\n\u0009\u0009\u0009//设置朗读速度为50\n\u0009\u0009\u0009player.setSpeed(50);\n\u0009\u0009\u0009//Setting.saveLogFile(LOG_LEVEL.none, null);\n\u0009\u0009\u0009//合成文本为VoiceSpeechListener.txt[VoiceSpeechListener.i]的分段文本，设置监听器为this\n\u0009\u0009\u0009player.playText(VoiceSpeechListener.txt[VoiceSpeechListener.i], null, this);\n\u0009\u0009\u0009\n\u0009\u0009\n\u0009}\n\u0009\n\u0009//取消合成\n\u0009public void cancel()\n\u0009{\n\u0009\u0009\n\u0009\u0009SynthesizerPlayer player = SynthesizerPlayer.getSynthesizerPlayer();\n\u0009\u0009player.cancel();\n\u0009}\n\u0009\n\u0009//在上一段语音结束时开始合成下一段，文本分段后存入字符数组\n\u0009@Override\n\u0009public void onEnd(SpeechError error) {\u0009\n\u0009\u0009\n\u0009 if(error==null\u0026\u0026VoiceSpeechListener.i\u003cVoiceSpeechListener.txt.length-1)//arg0为null表示发送成功,发送下一段\n\u0009   {\n\u0009\u0009 \n\u0009\u0009 SynthesizerPlayer player = SynthesizerPlayer.getSynthesizerPlayer();\n\u0009\u0009 player.playText(VoiceSpeechListener.txt[++VoiceSpeechListener.i].trim(), null, this);\n\u0009    }\n\n\u0009\u0009\n\u0009}\n\n\u0009@Override\n\u0009public void onBufferPercent(int percent, int beginPos, int endPos) {\n\u0009\u0009\n\u0009}\n\n\u0009@Override\n\u0009public void onPlayBegin() {\n\u0009\u0009\n\u0009}\n\n\u0009@Override\n\u0009public void onPlayPaused() {\n\u0009\u0009\n\u0009}\n\n\u0009@Override\n\u0009public void onPlayPercent(int percent, int beginPos, int endPos) {\u0009\u0009\u0009\n\u0009}\n\n\u0009@Override\n\u0009public void onPlayResumed() {\n\u0009\u0009\n\u0009}\n}\n```","Tags":["讯飞云","语音合成"],"CreateTime":1401721754,"EditTime":1405329906,"UpdateTime":1401721754,"IsComment":true,"IsLinked":false,"AuthorId":2,"Template":"blog.html","Type":"article","Status":"publish","Format":"markdown","Comments":[],"Hits":30}